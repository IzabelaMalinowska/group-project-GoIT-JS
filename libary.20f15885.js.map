{"mappings":"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","sources":["src/library.js","src/js/modal-library.js","src/js/pagination-library.js"],"sourcesContent":["import './js/students-modal';\nimport './js/spinner';\nimport './js/video';\nimport './sass/main.scss';\nimport './js/modal-library';\nimport './js/pagination-library';\nimport pagination from './js/pagination-library';\n\nconst watchedButton = document.querySelector('.btn-watched');\nconst queuedButton = document.querySelector('.btn-queue');\n\nconst main = document.querySelector('.library');\n\nconst watchedKey = 'watched';\nconst queueKey = 'queue';\n\nconst getMovieForLibrary = async id => {\n  const url = `https://api.themoviedb.org/3/movie/${id}?api_key=28f50cf3f177782503c21b43af04c7bc`;\n  try {\n    const resp = await fetch(url);\n    const data = await resp.json();\n    return data;\n  } catch (e) {\n    console.error(e);\n  }\n};\n\nconst createLibraryMovieTemplateHTML = (image, id, title, genres, year, rating) => {\n  return `<li class=\"movie__template\">\n    <img class=\"movie__image\" id=\"${id}\" src=\"${image}\" alt='${title}' width=\"280px\" height=\"398px\"/>\n    <h5 class=\"movie__title\">${title}</h5>\n    <div class=\"movie__informations\"><span>${genres}</span> | <span>${year}</span>\n    <span class=\"movie__rating\">${rating}</span></div>\n  </li>`;\n};\n\nconst searchPoster = movie => {\n  let posterPath = movie.poster_path ? movie.poster_path : movie.backdrop_path;\n  if (posterPath === null) {\n    return 'https://images.pexels.com/photos/5721902/pexels-photo-5721902.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2';\n  } else {\n    return `https://image.tmdb.org/t/p/original${posterPath}`;\n  }\n};\n\nconst createLibraryMovieTemplate = async ids => {\n  const moviesList = await Promise.all(\n    ids.map(async id => {\n      const movie = await getMovieForLibrary(id);\n      const image = searchPoster(movie);\n      const title = movie.title ? movie.title : movie.name;\n      const movieDate = movie.release_date ? movie.release_date : movie.first_air_date;\n      const year = new Date(movieDate).getFullYear();\n      const rating = movie.vote_average.toFixed(1);\n      const genres = movie.genres[0].name;\n      return createLibraryMovieTemplateHTML(image, id, title, genres, year, rating);\n    }),\n  );\n  main.innerHTML = moviesList.join('');\n};\n\nexport const loadWatchedLibrary = (key, page) => {\n  try {\n    const state = localStorage.getItem(key);\n    const array = JSON.parse(state);\n    pagination.getCurrentPage(page);\n    if (array === null) {\n      return;\n    } else {\n      createLibraryMovieTemplate(array);\n    }\n  } catch (error) {\n    console.error(error.message);\n  }\n};\n\nloadWatchedLibrary(watchedKey);\n\npagination.on('afterMove', evt => {\n  loadWatchedLibrary(evt.page);\n});\n\nwatchedButton.addEventListener('click', () => {\n  loadWatchedLibrary(watchedKey);\n});\n\nqueuedButton.addEventListener('click', () => {\n  loadWatchedLibrary(queueKey);\n});\n\nimport './js/students-modal';\n","import Notiflix from 'notiflix';\nimport { watched, queued, saveWatched, saveQueued } from './watched-queue';\n\nconst close = document.querySelector('.close_modal_window');\nconst modal = document.querySelector('.modal_window');\nconst main = document.querySelector('main');\nconst innerModal = document.querySelector('.modal_inner');\n\nconst modalLibrary = document.querySelector('.modal_content');\n\nfunction onCloseModal() {\n  modal.classList.add('is-hidden');\n  innerModal.innerHTML = '';\n  document.body.classList.remove('stop-scrolling');\n}\nfunction onCloseModalEscKey(e) {\n  if (e.code === 'Escape') {\n    onCloseModal();\n    modal.removeEventListener('click', onCloseModal);\n    document.body.classList.remove('stop-scrolling');\n  }\n}\n\nmain.addEventListener('click', onShowModal);\nclose.addEventListener('click', onCloseModal);\ndocument.body.addEventListener('keydown', onCloseModalEscKey);\ndocument.body.addEventListener('click', onCloseModalClick);\n\nasync function onShowModal(e) {\n  e.preventDefault();\n  if (!e.target.classList.contains('movie__image')) {\n    return;\n  } else {\n    modal.classList.remove('is-hidden');\n    const selectedMovieId = e.target.id;\n    getMovie(selectedMovieId);\n    document.body.classList.add('stop-scrolling');\n  }\n}\n\nfunction onCloseModalClick(e) {\n  if (e.target === modal) {\n    onCloseModal();\n    document.body.classList.remove('stop-scrolling');\n    modal.removeEventListener('click', onCloseModal);\n  }\n}\n\nasync function getMovie(movieId) {\n  try {\n    const response = await fetch(\n      `https://api.themoviedb.org/3/movie/${movieId}?api_key=28f50cf3f177782503c21b43af04c7bc`,\n    );\n    const movieInformation = await response.json();\n    getMovieAndUpdateUI(movieInformation);\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nasync function getMovieAndUpdateUI(movie) {\n  try {\n    const { desktop, tablet, mobile } = `https://image.tmdb.org/t/p/original${movie.poster_path}`;\n    const modalMarkup = `\n      <div class=\"modalMarkup trailer__picture\">\n         <picture>\n            <source src= ${desktop} media=\"(min-width: 1200px)\">\n            <source src= ${tablet} media=\"(min-width: 768px)\">\n            <source src= ${mobile} media=\"(min-width: 320px)\">\n            <img src= https://image.tmdb.org/t/p/original${movie.poster_path} \n            alt=${movie.title} \n            id =${movie.id} class=\"modal__img\">\n        </picture>\n        <svg xmlns=\"http://www.w3.org/2000/svg\" \n        width=\"70px\" height=\"70px\" \n        class=\"modal__svg\" \n        id=${movie.id}\n        viewBox=\"0 0 16 16\">\n         <path \n         id=${movie.id} d=\"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z\"/>\n         <path\n         id=${\n           movie.id\n         } d=\"M6.271 5.055a.5.5 0 0 1 .52.038l3.5 2.5a.5.5 0 0 1 0 .814l-3.5 2.5A.5.5 0 0 1 6 10.5v-5a.5.5 0 0 1 .271-.445z\"/>\n        </svg>\n      </div>\n      <div class=\"modal__content-movie \">\n\n\n        <p class=\"modal__title\">${movie.title}</p>\n        <div class=\"modal__box\">\n          <div class=\"film-features\">\n            <p class=\"film-features__text\">Vote / Votes</p>\n            <p class=\"film-features__text\">Popularity</p>\n            <p class=\"film-features__text\">Original Title</p>\n            <p class=\"film-features__text\">Genre</p>\n          </div>\n          <div class=\"film-values\">\n            <p class=\"film-values__text\">\n              <span class=\"film-values__vote film-values__vote--color\">${movie.vote_average}</span>\n              <span class=\"film-values__slash\">/</span>\n              <span class=\"film-values__vote film-values__votes--color\">${movie.vote_count}</span>\n            </p>\n            <p class=\"film-values__text\">\n              <span class=\"film-value__vote\">${movie.popularity.toFixed(1)}</span>\n            </p>\n            <p class=\"film-values__text\">\n              <span class=\"film-values__vote\">${movie.original_title}</span>\n            </p>\n            <p class=\"film-values__text\">\n              <span class=\"film-values__vote\">${movie.genres[0].name}</span>\n            </p>\n          </div>\n        </div>\n        <div class=\"modal__description\">\n          <p class=\"modal__about\">About</p>\n          <p class=\"modal__text\">${movie.overview}</p>\n        </div>\n        <div class=\"modal__btn-box\">\n          <button \n          class=\"modal__btn modal__btn--removeWatched\" \n          id=\"${movie.id}\" type=\"button\" >Remove from watched</button>\n          <button \n          class=\"modal__btn modal__btn--removeQueued\"\n          id=\"${movie.id}\" type=\"button\" >Remove from queue</button>\n\n        </div>\n      </div>`;\n\n    innerModal.insertAdjacentHTML('beforeend', modalMarkup);\n  } catch (e) {\n    console.log(e);\n  }\n}\n\nconst removeFromWatched = id => {\n  if (!watched.includes(id)) {\n    Notiflix.Notify.info('You allready removed this movie from watched.');\n  } else {\n    const index = watched.indexOf(id);\n    watched.splice(index, 1);\n    try {\n      saveWatched();\n      Notiflix.Notify.success('Succesfully removed from watched.');\n    } catch (error) {\n      console.error(error.message);\n      Notiflix.Notify.failure('Something went wrong. Please, try again later.');\n    }\n  }\n};\n\nconst removeFromQueue = id => {\n  if (!queued.includes(id)) {\n    Notiflix.Notify.info('You allready removed this movie from queued.');\n  } else {\n    const index = queued.indexOf(id);\n    queued.splice(index, 1);\n    try {\n      saveQueued();\n      Notiflix.Notify.success('Succesfully removed from watched.');\n    } catch (error) {\n      console.error(error.message);\n      Notiflix.Notify.failure('Something went wrong. Please, try again later.');\n    }\n  }\n};\n\nconst removeFromLocalStorage = e => {\n  const movieId = e.target.id;\n  if (e.target.classList.contains('modal__btn--removeWatched')) {\n    removeFromWatched(movieId);\n  } else if (e.target.classList.contains('modal__btn--removeQueued')) {\n    removeFromQueue(movieId);\n  } else {\n    return;\n  }\n};\n\nmodalLibrary.addEventListener('click', removeFromLocalStorage);\n","import { loadWatchedLibrary } from '../library';\nimport Pagination from 'tui-pagination';\n\nconst options = {\n  totalItems: 1000,\n  itemsPerPage: 20,\n  visiblePages: 5,\n  page: 1,\n  centerAlign: true,\n  template: {\n    page: '<a href=\"#\" class=\"tui-page-btn\">{{page}}</a>',\n    currentPage: '<strong class=\"tui-page-btn tui-is-selected\">{{page}}</strong>',\n    moveButton:\n      '<a href=\"#\" class=\"tui-page-btn tui-{{type}}\">' +\n      '<span class=\"tui-ico-{{type}}\">{{type}}</span>' +\n      '</a>',\n    disabledMoveButton:\n      '<span class=\"tui-page-btn tui-is-disabled tui-{{type}}\">' +\n      '<span class=\"tui-ico-{{type}}\">{{type}}</span>' +\n      '</span>',\n    moreButton:\n      '<a href=\"#\" class=\"tui-page-btn tui-{{type}}-is-ellip\">' + '<span>⋅⋅⋅</span>' + '</a>',\n  },\n};\n\nconst pagination = new Pagination('pagination', options);\n\npagination.on('afterMove', function (eventData) {\n  window.scrollTo({ top: 0, behavior: 'smooth' });\n  const currentPage = eventData.page;\n  const startIndex = (currentPage - 1) * options.itemsPerPage;\n  const endIndex = startIndex + options.itemsPerPage;\n\n  if (currentPage > 1) {\n    loadWatchedLibrary(startIndex, endIndex);\n  }\n});\n\nexport default pagination;\n"],"names":["parcelRequire","$7IoHk","$e7f5dcb4379e869d$var$close","document","querySelector","$e7f5dcb4379e869d$var$modal","$e7f5dcb4379e869d$var$main","$e7f5dcb4379e869d$var$innerModal","$e7f5dcb4379e869d$var$modalLibrary","$e7f5dcb4379e869d$var$onCloseModal","classList","add","innerHTML","body","remove","addEventListener","async","e","preventDefault","target","contains","movieId","response","fetch","movie","desktop","tablet","mobile","poster_path","modalMarkup","title","id","vote_average","vote_count","popularity","toFixed","original_title","genres","name","overview","insertAdjacentHTML","console","log","$e7f5dcb4379e869d$var$getMovieAndUpdateUI","json","error","$e7f5dcb4379e869d$var$getMovie","code","removeEventListener","$2HCDh","watched","includes","index","indexOf","splice","saveWatched","$parcel$interopDefault","Notify","success","message","failure","info","$e7f5dcb4379e869d$var$removeFromWatched","queued","saveQueued","$e7f5dcb4379e869d$var$removeFromQueue","$94cfa6f5b2f224f0$var$options","totalItems","itemsPerPage","visiblePages","page","centerAlign","template","currentPage","moveButton","disabledMoveButton","moreButton","$94cfa6f5b2f224f0$var$pagination","$afPuq","on","eventData","window","scrollTo","top","behavior","startIndex","$9a8afeea60b9dfd3$export$f4104d8e91b26473","$94cfa6f5b2f224f0$export$2e2bcd8739ae039","$9a8afeea60b9dfd3$var$watchedButton","$9a8afeea60b9dfd3$var$queuedButton","$9a8afeea60b9dfd3$var$main","$9a8afeea60b9dfd3$var$watchedKey","$9a8afeea60b9dfd3$var$createLibraryMovieTemplate","ids","moviesList","Promise","all","map","url","resp","$9a8afeea60b9dfd3$var$getMovieForLibrary","image","posterPath","backdrop_path","$9a8afeea60b9dfd3$var$searchPoster","movieDate","release_date","first_air_date","year","Date","getFullYear","rating","$9a8afeea60b9dfd3$var$createLibraryMovieTemplateHTML","join","key","state","localStorage","getItem","array","JSON","parse","getCurrentPage","evt"],"version":3,"file":"libary.20f15885.js.map"}